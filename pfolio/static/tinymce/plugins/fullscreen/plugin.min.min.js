tinymce.PluginManager.add("fullscreen",function(n){var q=false,l=tinymce.DOM,o,p,s;var m,k;if(n.settings.inline){return}function r(){var b,a,d=window,e=document;var c=e.body;if(c.offsetWidth){b=c.offsetWidth;a=c.offsetHeight}if(d.innerWidth&&d.innerHeight){b=d.innerWidth;a=d.innerHeight}return{w:b,h:a}}function t(){var b=document.body,d=document.documentElement,f;var e,g,c;function a(){l.setStyle(g,"height",r().h-(e.clientHeight-g.clientHeight))}q=!q;e=n.getContainer();f=e.style;g=n.getContentAreaContainer().firstChild;c=g.style;if(q){o=c.width;p=c.height;c.width=c.height="100%";m=f.width;k=f.height;f.width=f.height="";l.addClass(b,"mce-fullscreen");l.addClass(d,"mce-fullscreen");l.addClass(e,"mce-fullscreen");l.bind(window,"resize",a);a();s=a}else{c.width=o;c.height=p;if(m){f.width=m}if(k){f.height=k}l.removeClass(b,"mce-fullscreen");l.removeClass(d,"mce-fullscreen");l.removeClass(e,"mce-fullscreen");l.unbind(window,"resize",s)}n.fire("FullscreenStateChanged",{state:q})}n.on("init",function(){n.addShortcut("Meta+Alt+F","",t)});n.on("remove",function(){if(s){l.unbind(window,"resize",s)}});n.addCommand("mceFullScreen",t);n.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Alt+F",selectable:true,onClick:t,onPostRender:function(){var a=this;n.on("FullscreenStateChanged",function(b){a.active(b.state)})},context:"view"});n.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Meta+Alt+F",onClick:t,onPostRender:function(){var a=this;n.on("FullscreenStateChanged",function(b){a.active(b.state)})}});return{isFullscreen:function(){return q}}});