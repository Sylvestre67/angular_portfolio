tinymce.ThemeManager.add("modern",function(e){var l=this,q=e.settings,o=tinymce.ui.Factory,c=tinymce.each,r=tinymce.DOM,h=tinymce.geom.Rect,n=tinymce.ui.FloatPanel;var k={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}};var d="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";function a(u,v){var w=[],t;if(!u){return}c(u.split(/[ ,]/),function(y){var z;function x(){var A=e.selection;function B(C){return function(F,D){var G,E=D.parents.length;while(E--){G=D.parents[E].nodeName;if(G=="OL"||G=="UL"){break}}y.active(F&&G==C)}}if(z=="bullist"){A.selectorChanged("ul > li",B("UL"))}if(z=="numlist"){A.selectorChanged("ol > li",B("OL"))}if(y.settings.stateSelector){A.selectorChanged(y.settings.stateSelector,function(C){y.active(C)},true)}if(y.settings.disabledStateSelector){A.selectorChanged(y.settings.disabledStateSelector,function(C){y.disabled(C)})}}if(y=="|"){t=null}else{if(o.has(y)){y={type:y,size:v};w.push(y);t=null}else{if(!t){t={type:"buttongroup",items:[]};w.push(t)}if(e.buttons[y]){z=y;y=e.buttons[z];if(typeof y=="function"){y=y()}y.type=y.type||"button";y.size=v;y=o.create(y);t.items.push(y);if(e.initialized){x()}else{e.on("init",x)}}}}});return{type:"toolbar",layout:"flow",items:w}}function f(u){var v=[];function w(x){if(x){v.push(a(x,u));return true}}if(tinymce.isArray(q.toolbar)){if(q.toolbar.length===0){return}tinymce.each(q.toolbar,function(y,x){q["toolbar"+(x+1)]=y});delete q.toolbar}for(var t=1;t<10;t++){if(!w(q["toolbar"+t])){break}}if(!v.length&&q.toolbar!==false){w(q.toolbar||d)}if(v.length){return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:true,ariaRemember:true,items:v}}}function s(){var v,A=[];function y(B){var C;if(B=="|"){return{text:"|"}}C=e.menuItems[B];return C}function t(F){var B,G,E,H,D;D=tinymce.makeMap((q.removed_menuitems||"").split(/[ ,]/));if(q.menu){G=q.menu[F];H=true}else{G=k[F]}if(G){B={text:G.title};E=[];c((G.items||"").split(/[ ,]/),function(J){var I=y(J);if(I&&!D[J]){E.push(y(J))}});if(!H){c(e.menuItems,function(I){if(I.context==F){if(I.separator=="before"){E.push({text:"|"})}if(I.prependToContext){E.unshift(I)}else{E.push(I)}if(I.separator=="after"){E.push({text:"|"})}}})}for(var C=0;C<E.length;C++){if(E[C].text=="|"){if(C===0||C==E.length-1){E.splice(C,1)}}}B.menu=E;if(!B.menu.length){return null}}return B}var u=[];if(q.menu){for(v in q.menu){u.push(v)}}else{for(v in k){u.push(v)}}var x=typeof q.menubar=="string"?q.menubar.split(/[ ,]/):u;for(var w=0;w<x.length;w++){var z=x[w];z=t(z);if(z){A.push(z)}}return A}function j(u){function t(v){var w=u.find(v)[0];if(w){w.focus(true)}}e.shortcuts.add("Alt+F9","",function(){t("menubar")});e.shortcuts.add("Alt+F10","",function(){t("toolbar")});e.shortcuts.add("Alt+F11","",function(){t("elementpath")});u.on("cancel",function(){e.focus()})}function m(v,u){var z,t,x,y;function w(A){return{width:A.clientWidth,height:A.clientHeight}}z=e.getContainer();t=e.getContentAreaContainer().firstChild;x=w(z);y=w(t);if(v!==null){v=Math.max(q.min_width||100,v);v=Math.min(q.max_width||65535,v);r.setStyle(z,"width",v+(x.width-y.width));r.setStyle(t,"width",v)}u=Math.max(q.min_height||100,u);u=Math.min(q.max_height||65535,u);r.setStyle(t,"height",u);e.fire("ResizeEditor")}function g(t,u){var v=e.getContentAreaContainer();l.resizeTo(v.clientWidth+t,v.clientHeight+u)}function p(){var z;function x(){return e.contextToolbars||[]}function B(G){var F,E,D;F=tinymce.DOM.getPos(e.getContentAreaContainer());E=e.dom.getRect(G);D=e.dom.getRoot();if(D.nodeName=="BODY"){E.x-=D.ownerDocument.documentElement.scrollLeft||D.scrollLeft;E.y-=D.ownerDocument.documentElement.scrollTop||D.scrollTop}E.x+=F.x;E.y+=F.y;return E}function y(){c(e.contextToolbars,function(D){if(D.panel){D.panel.hide()}})}function C(H){var D,F,G,J,E,K,I;if(e.removed){return}if(!H||!H.toolbar.panel){y();return}I=["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr"];E=H.toolbar.panel;E.show();G=B(H.element);F=tinymce.DOM.getRect(E.getEl());J=tinymce.DOM.getRect(e.getContentAreaContainer()||e.getBody());G.w=H.element.clientWidth;G.h=H.element.clientHeight;if(!e.inline){J.w=e.getDoc().documentElement.offsetWidth}if(e.selection.controlSelection.isResizable(H.element)){G=h.inflate(G,0,8)}D=h.findBestRelativePosition(F,G,J,I);if(D){c(I.concat("inside"),function(L){E.classes.toggle("tinymce-inline-"+L,L==D)});K=h.relativePosition(F,G,D);E.moveTo(K.x,K.y)}else{c(I,function(L){E.classes.toggle("tinymce-inline-"+L,false)});E.classes.toggle("tinymce-inline-inside",true);G=h.intersect(J,G);if(G){D=h.findBestRelativePosition(F,G,J,["tc-tc","tl-tl","tr-tr"]);if(D){K=h.relativePosition(F,G,D);E.moveTo(K.x,K.y)}else{E.moveTo(G.x,G.y)}}else{E.hide()}}}function u(){function D(){if(e.selection){C(t(e.selection.getNode()))}}tinymce.util.Delay.requestAnimationFrame(D)}function A(){if(!z){z=e.selection.getScrollContainer()||e.getWin();tinymce.$(z).on("scroll",u);e.on("remove",function(){tinymce.$(z).off("scroll")})}}function w(E){var D;if(E.toolbar.panel){E.toolbar.panel.show();C(E);return}A();D=o.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:true,border:1,items:a(E.toolbar.items)});E.toolbar.panel=D;D.renderTo(document.body).reflow();C(E)}function v(){tinymce.each(x(),function(D){if(D.panel){D.panel.hide()}})}function t(F){var E,H,D,G=x();D=e.$(F).parents().add(F);for(E=D.length-1;E>=0;E--){for(H=G.length-1;H>=0;H--){if(G[H].predicate(D[E])){return{toolbar:G[H],element:D[E]}}}}return null}e.on("click keyup setContent",function(D){if(D.type=="setcontent"&&!D.selection){return}tinymce.util.Delay.setEditorTimeout(e,function(){var E;E=t(e.selection.getNode());if(E){v();w(E)}else{v()}})});e.on("blur hide",v);e.on("ObjectResizeStart",function(){var D=t(e.selection.getNode());if(D&&D.toolbar.panel){D.toolbar.panel.hide()}});e.on("nodeChange ResizeEditor ResizeWindow",u);e.on("remove",function(){tinymce.each(x(),function(D){if(D.panel){D.panel.remove()}});e.contextToolbars={}})}function i(w){var v,z;if(q.fixed_toolbar_container){z=r.select(q.fixed_toolbar_container)[0]}function u(){if(v&&v.moveRel&&v.visible()&&!v._fixed){var E=e.selection.getScrollContainer(),B=e.getBody();var C=0,A=0;if(E){var F=r.getPos(B),D=r.getPos(E);C=Math.max(0,D.x-F.x);A=Math.max(0,D.y-F.y)}v.fixed(false).moveRel(B,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(C,A)}}function t(){if(v){v.show();u();r.addClass(e.getBody(),"mce-edit-focus")}}function x(){if(v){v.hide();n.hideAll();r.removeClass(e.getBody(),"mce-edit-focus")}}function y(){if(v){if(!v.visible()){t()}return}v=l.panel=o.create({type:z?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:!!z,border:1,items:[q.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:s()},f(q.toolbar_items_size)]});e.fire("BeforeRenderUI");v.renderTo(z||document.body).reflow();j(v);t();p();e.on("nodeChange",u);e.on("activate",t);e.on("deactivate",x);e.nodeChanged()}q.content_editable=true;e.on("focus",function(){if(w.skinUiCss){tinymce.DOM.styleSheetLoader.load(w.skinUiCss,y,y)}else{y()}});e.on("blur hide",x);e.on("remove",function(){if(v){v.remove();v=null}});if(w.skinUiCss){tinymce.DOM.styleSheetLoader.load(w.skinUiCss)}return{}}function b(v){var u,w,t;function x(){return function(y){if(y.mode=="readonly"){u.find("*").disabled(true)}else{u.find("*").disabled(false)}}}if(v.skinUiCss){tinymce.DOM.loadCSS(v.skinUiCss)}u=l.panel=o.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[q.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:s()},f(q.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});if(q.resize!==false){w={type:"resizehandle",direction:q.resize,onResizeStart:function(){var y=e.getContentAreaContainer().firstChild;t={width:y.clientWidth,height:y.clientHeight}},onResize:function(y){if(q.resize=="both"){m(t.width+y.deltaX,t.height+y.deltaY)}else{m(null,t.height+y.deltaY)}}}}if(q.statusbar!==false){u.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:true,items:[{type:"elementpath"},w]})}if(q.readonly){u.find("*").disabled(true)}e.fire("BeforeRenderUI");e.on("SwitchMode",x());u.renderBefore(v.targetNode).reflow();if(q.width){tinymce.DOM.setStyle(u.getEl(),"width",q.width)}e.on("remove",function(){u.remove();u=null});j(u);p();return{iframeContainer:u.find("#iframe")[0].getEl(),editorContainer:u.getEl()}}l.renderUI=function(u){var v=q.skin!==false?q.skin||"lightgray":false;if(v){var t=q.skin_url;if(t){t=e.documentBaseURI.toAbsolute(t)}else{t=tinymce.baseURL+"/skins/"+v}if(tinymce.Env.documentMode<=7){u.skinUiCss=t+"/skin.ie7.min.css"}else{u.skinUiCss=t+"/skin.min.css"}e.contentCSS.push(t+"/content"+(e.inline?".inline":"")+".min.css")}e.on("ProgressState",function(w){l.throbber=l.throbber||new tinymce.ui.Throbber(l.panel.getEl("body"));if(w.state){l.throbber.show(w.time)}else{l.throbber.hide()}});if(q.inline){return i(u)}return b(u)};l.resizeTo=m;l.resizeBy=g});